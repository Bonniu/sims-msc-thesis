<h1>Notifications</h1>

<table #notificationsTable mat-table matSort [dataSource]="this.notifications">
  <ng-container matColumnDef="id">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> ID</th>
    <td mat-cell *matCellDef="let notification"
        class="{{this.getClassForNotification(notification)}}"> {{notification.id}} </td>
  </ng-container>

  <ng-container matColumnDef="message">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Message</th>
    <td mat-cell *matCellDef="let notification"
        class="{{this.getClassForNotification(notification)}}"> {{notification.message}} </td>
  </ng-container>

  <ng-container matColumnDef="timestamp">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Date</th>
    <td mat-cell *matCellDef="let notification"
        class="{{this.getClassForNotification(notification)}}"> {{notification.timestamp | date: 'yyyy-MM-dd HH:mm:ss.SSS' }} </td>
  </ng-container>

  <ng-container matColumnDef="errorType">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Error Type</th>
    <td mat-cell *matCellDef="let notification"
        class="{{this.getClassForNotification(notification)}}"> {{notification.errorType}} </td>
  </ng-container>

  <ng-container matColumnDef="seen">
    <th mat-header-cell *matHeaderCellDef> Mark as seen</th>
    <td mat-cell *matCellDef="let notification">
      <mat-checkbox class="example-margin" *ngIf="!notification.seen" [(ngModel)]="notification.seen"
                    (change)="this.updateNotification(notification)"></mat-checkbox>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</table>

<button mat-raised-button color="primary" (click)="markAllAsSeen()">Mark all as seen</button>

